

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Quickstart &mdash; apigee-cli 0.x.x documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="auth" href="auth.html" />
    <link rel="prev" title="Installation" href="installation.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> apigee-cli
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting started</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#getting-started">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="#getting-an-oauth-access-token">Getting an OAuth Access Token</a></li>
<li class="toctree-l2"><a class="reference internal" href="#listing-api-proxies">Listing API Proxies</a></li>
<li class="toctree-l2"><a class="reference internal" href="#deploying-an-api-proxy">Deploying an API Proxy</a></li>
<li class="toctree-l2"><a class="reference internal" href="#exporting-an-api-proxy">Exporting an API Proxy</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pulling-an-api-proxy-and-its-dependencies">Pulling an API Proxy and its dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="#getting-api-proxy-revisions-that-are-actively-deployed">Getting API proxy revisions that are actively deployed</a></li>
<li class="toctree-l2"><a class="reference internal" href="#deleting-all-undeployed-revisions-of-an-api-proxy">Deleting all undeployed revisions of an API proxy</a></li>
<li class="toctree-l2"><a class="reference internal" href="#managing-key-value-maps-kvms">Managing Key value maps (KVMs)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#getting-permissions-for-a-role">Getting permissions for a role</a></li>
<li class="toctree-l2"><a class="reference internal" href="#setting-permissions-for-a-role">Setting permissions for a role</a></li>
<li class="toctree-l2"><a class="reference internal" href="#importing-modules">Importing modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="#restoring-developer-apps">Restoring Developer Apps</a></li>
<li class="toctree-l2"><a class="reference internal" href="#getting-help">Getting Help</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="auth.html">auth</a></li>
<li class="toctree-l1"><a class="reference internal" href="source/apigee.api.html">apigee.api package</a></li>
<li class="toctree-l1"><a class="reference internal" href="source/apigee.abstract.api.html">apigee.abstract.api package</a></li>
<li class="toctree-l1"><a class="reference internal" href="source/apigee.parsers.html">apigee.parsers package</a></li>
</ul>
<p class="caption"><span class="caption-text">Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="license.html">Apache License</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html#contact">Contact</a></li>
<li class="toctree-l1"><a class="reference internal" href="disclaimer.html">Disclaimer</a></li>
<li class="toctree-l1"><a class="reference internal" href="help.html">Need Help</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">apigee-cli</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Quickstart</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/quickstart.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="quickstart">
<h1>Quickstart<a class="headerlink" href="#quickstart" title="Permalink to this headline">¶</a></h1>
<div class="section" id="getting-started">
<span id="id1"></span><h2>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<p>Before using apigee-cli, you need to tell it about your Apigee Edge credentials.  You
can do this in three ways:</p>
<ul class="simple">
<li><p>Environment variables</p></li>
<li><p>Config file</p></li>
<li><p>Command-line arguments</p></li>
</ul>
<p>The quickest way to get started is to run the <code class="docutils literal notranslate"><span class="pre">apigee</span> <span class="pre">configure</span></code> command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apigee configure
Apigee username (email) [None]: my_email
Apigee password [None]: my_pass
Apigee MFA key (recommended) [None]: my_key
Default Apigee organization (recommended) [None]: my_org
Default team/resource prefix (recommended) [None]: team_prefix
</pre></div>
</div>
<p>To use environment variables, do the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ export APIGEE_USERNAME=&lt;my_email&gt;
$ export APIGEE_PASSWORD=&lt;my_pass&gt;
$ export APIGEE_MFA_SECRET=&lt;my_key&gt;
$ export APIGEE_ORG=&lt;my_org&gt;
$ export APIGEE_CLI_PREFIX=&lt;my_prefix&gt;
</pre></div>
</div>
<p>To use the configuration file, create an INI formatted file like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">default</span><span class="p">]</span>
<span class="n">username</span> <span class="o">=</span> <span class="n">my_email</span>
<span class="n">org</span> <span class="o">=</span> <span class="n">my_org</span>
<span class="n">mfa_secret</span> <span class="o">=</span> <span class="n">my_key</span>
<span class="n">prefix</span> <span class="o">=</span> <span class="n">my_prefix</span>
<span class="n">password</span> <span class="o">=</span> <span class="n">my_pass</span>

<span class="p">[</span><span class="n">produser</span><span class="p">]</span>
<span class="n">org</span> <span class="o">=</span> <span class="n">my_org</span>
<span class="n">username</span> <span class="o">=</span> <span class="n">my_email</span>
<span class="n">password</span> <span class="o">=</span> <span class="n">my_pass</span>
<span class="n">mfa_secret</span> <span class="o">=</span> <span class="n">my_key</span>
</pre></div>
</div>
<p>and place it in <code class="docutils literal notranslate"><span class="pre">~/.apigee/credentials</span></code>.</p>
<p>As you can see, you can have multiple <code class="docutils literal notranslate"><span class="pre">profiles</span></code> defined in the configuration file. You can then specify which
profile to use by using the <code class="docutils literal notranslate"><span class="pre">-P/--profile</span></code> option. If no profile is specified
the <code class="docutils literal notranslate"><span class="pre">default</span></code> profile is used.</p>
</div>
<div class="section" id="getting-an-oauth-access-token">
<span id="id2"></span><h2>Getting an OAuth Access Token<a class="headerlink" href="#getting-an-oauth-access-token" title="Permalink to this headline">¶</a></h2>
<p>To get an OAuth 2.0 access token, configure an MFA key, then run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apigee auth access-token
</pre></div>
</div>
<p>This will return <code class="docutils literal notranslate"><span class="pre">None</span></code> if an MFA key is not set.</p>
</div>
<div class="section" id="listing-api-proxies">
<span id="id3"></span><h2>Listing API Proxies<a class="headerlink" href="#listing-api-proxies" title="Permalink to this headline">¶</a></h2>
<p>To list all APIs in an organization, run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apigee apis list
</pre></div>
</div>
<p>To only list APIs that start with a prefix, run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apigee apis list --prefix [team_prefix]
</pre></div>
</div>
<p>This will list all APIs within an organization that start with <code class="docutils literal notranslate"><span class="pre">[team_prefix]</span></code>. To change
the organization, specify <code class="docutils literal notranslate"><span class="pre">-o/--organization</span></code>.</p>
</div>
<div class="section" id="deploying-an-api-proxy">
<span id="id4"></span><h2>Deploying an API Proxy<a class="headerlink" href="#deploying-an-api-proxy" title="Permalink to this headline">¶</a></h2>
<p>To seamless deploy an API Proxy, run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apigee apis deploy --seamless-deploy -d [path] -n [name] -e [env]
</pre></div>
</div>
</div>
<div class="section" id="exporting-an-api-proxy">
<span id="id5"></span><h2>Exporting an API Proxy<a class="headerlink" href="#exporting-an-api-proxy" title="Permalink to this headline">¶</a></h2>
<p>To export an API Proxy revision, run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apigee apis export -n [name] -r [revision]
</pre></div>
</div>
<p>This will export to <code class="docutils literal notranslate"><span class="pre">[name].zip</span></code>.</p>
<p>To export to a specific file, run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apigee apis export -n [name] -r [revision] -O [new_name].zip
</pre></div>
</div>
<p>This will export to <code class="docutils literal notranslate"><span class="pre">[new_name].zip</span></code>.</p>
</div>
<div class="section" id="pulling-an-api-proxy-and-its-dependencies">
<span id="id6"></span><h2>Pulling an API Proxy and its dependencies<a class="headerlink" href="#pulling-an-api-proxy-and-its-dependencies" title="Permalink to this headline">¶</a></h2>
<p>To pull an API proxy revision and its dependencies into the current working directory, run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apigee apis pull -e [env] -n [name] -r [revision]
</pre></div>
</div>
<p>To specify a target directory, use the <code class="docutils literal notranslate"><span class="pre">--work-tree</span></code>  option:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apigee apis pull -e [env] -n [name] -r [revision] --work-tree [dir]
</pre></div>
</div>
<p>You can also add a prefix to the name of the API and its dependencies using the <code class="docutils literal notranslate"><span class="pre">--prefix</span></code> option:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apigee apis pull -e [env] -n [name] -r [revision] --prefix [prefix]
</pre></div>
</div>
<p>If you get the following error:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">error</span><span class="p">:</span> <span class="p">[</span><span class="n">path</span><span class="p">]</span> <span class="n">already</span> <span class="n">exists</span>
</pre></div>
</div>
<p>then use the <code class="docutils literal notranslate"><span class="pre">-f/--force</span></code> flag:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apigee apis pull -e [env] -n [name] -r [revision] --force
</pre></div>
</div>
</div>
<div class="section" id="getting-api-proxy-revisions-that-are-actively-deployed">
<span id="id7"></span><h2>Getting API proxy revisions that are actively deployed<a class="headerlink" href="#getting-api-proxy-revisions-that-are-actively-deployed" title="Permalink to this headline">¶</a></h2>
<p>To get actively deployed revisions for an API Proxy, run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apigee deps get -r -n [name]
</pre></div>
</div>
<p>This will output a table like so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">name</span>    <span class="n">revision</span>
<span class="n">dev</span>     <span class="p">[</span><span class="s1">&#39;32&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>The table can be formatted by specifiying <code class="docutils literal notranslate"><span class="pre">--tablefmt</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apigee deps get -r -n [name] --tablefmt fancy_grid --showindex
</pre></div>
</div>
<p>This will output a table like so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>╒══════╤════════╤════════════╕
│   id │ name   │ revision   │
╞══════╪════════╪════════════╡
│    0 │ dev    │ [&#39;32&#39;]     │
╘══════╧════════╧════════════╛
</pre></div>
</div>
<p>Supported table formats are (default is <code class="docutils literal notranslate"><span class="pre">plain</span></code>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span><span class="n">tablefmt</span> <span class="p">{</span><span class="n">plain</span><span class="p">,</span><span class="n">simple</span><span class="p">,</span><span class="n">github</span><span class="p">,</span><span class="n">grid</span><span class="p">,</span><span class="n">fancy_grid</span><span class="p">,</span><span class="n">pipe</span><span class="p">,</span><span class="n">orgtbl</span><span class="p">,</span><span class="n">jira</span><span class="p">,</span><span class="n">presto</span><span class="p">,</span><span class="n">psql</span><span class="p">,</span><span class="n">rst</span><span class="p">,</span><span class="n">mediawiki</span><span class="p">,</span><span class="n">moinmoin</span><span class="p">,</span><span class="n">youtrack</span><span class="p">,</span><span class="n">html</span><span class="p">,</span><span class="n">latex</span><span class="p">,</span><span class="n">latex_raw</span><span class="p">,</span><span class="n">latex_booktabs</span><span class="p">,</span><span class="n">textile</span><span class="p">}</span>
</pre></div>
</div>
<p>See the <code class="docutils literal notranslate"><span class="pre">tabulate</span></code> package for more info.</p>
<p>To output as JSON, specify the <code class="docutils literal notranslate"><span class="pre">-j/--json</span></code> argument:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apigee deps get -r -n [name] -j
</pre></div>
</div>
<p>This will output the table like so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;dev&quot;</span><span class="p">,</span> <span class="s2">&quot;revision&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;3&quot;</span><span class="p">,</span> <span class="s2">&quot;5&quot;</span><span class="p">]},</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">,</span> <span class="s2">&quot;revision&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;3&quot;</span><span class="p">]}]</span>
</pre></div>
</div>
</div>
<div class="section" id="deleting-all-undeployed-revisions-of-an-api-proxy">
<span id="id8"></span><h2>Deleting all undeployed revisions of an API proxy<a class="headerlink" href="#deleting-all-undeployed-revisions-of-an-api-proxy" title="Permalink to this headline">¶</a></h2>
<p>To delete all undeployed revisions for an API Proxy, run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apigee apis clean -n [name]
</pre></div>
</div>
<p>To preserve the <code class="docutils literal notranslate"><span class="pre">N</span></code> most recent revisions, run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apigee apis clean -n [name] --save-last [N]
</pre></div>
</div>
<p>To see which revisions will be deleted but not delete anything, run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apigee apis clean -n [name] --dry-run
</pre></div>
</div>
</div>
<div class="section" id="managing-key-value-maps-kvms">
<span id="id9"></span><h2>Managing Key value maps (KVMs)<a class="headerlink" href="#managing-key-value-maps-kvms" title="Permalink to this headline">¶</a></h2>
<p>The following commands are supported:</p>
<dl>
<dt>usage: apigee kvms [-h]</dt><dd><p>{create,create-keyvaluemap-in-an-environment,delete,delete-keyvaluemap-from-an-environment,delete-entry,delete-keyvaluemap-entry-in-an-environment,get,get-keyvaluemap-in-an-environment,get-value,get-a-keys-value-in-an-environment-scoped-keyvaluemap,list,list-keyvaluemaps-in-an-environment,update,update-keyvaluemap-in-an-environment,create-entry,create-an-entry-in-an-environment-scoped-kvm,update-entry,update-an-entry-in-an-environment-scoped-kvm,list-keys,list-keys-in-an-environment-scoped-keyvaluemap,push,push-keyvaluemap}
…</p>
</dd>
<dt>positional arguments:</dt><dd><dl class="simple">
<dt>{create,create-keyvaluemap-in-an-environment,delete,delete-keyvaluemap-from-an-environment,delete-entry,delete-keyvaluemap-entry-in-an-environment,get,get-keyvaluemap-in-an-environment,get-value,get-a-keys-value-in-an-environment-scoped-keyvaluemap,list,list-keyvaluemaps-in-an-environment,update,update-keyvaluemap-in-an-environment,create-entry,create-an-entry-in-an-environment-scoped-kvm,update-entry,update-an-entry-in-an-environment-scoped-kvm,list-keys,list-keys-in-an-environment-scoped-keyvaluemap,push,push-keyvaluemap}</dt><dd><dl class="simple">
<dt>create (create-keyvaluemap-in-an-environment)</dt><dd><p>Creates a key value map in an environment.</p>
</dd>
<dt>delete (delete-keyvaluemap-from-an-environment)</dt><dd><p>Deletes a key/value map and all associated entries
from an environment.</p>
</dd>
<dt>delete-entry (delete-keyvaluemap-entry-in-an-environment)</dt><dd><p>Deletes a specific key/value map entry in an
environment by name, along with associated entries.</p>
</dd>
<dt>get (get-keyvaluemap-in-an-environment)</dt><dd><p>Gets a KeyValueMap (KVM) in an environment by name,
along with the keys and values.</p>
</dd>
<dt>get-value (get-a-keys-value-in-an-environment-scoped-keyvaluemap)</dt><dd><p>Gets the value of a key in an environment-scoped
KeyValueMap (KVM).</p>
</dd>
<dt>list (list-keyvaluemaps-in-an-environment)</dt><dd><p>Lists the name of all key/value maps in an environment
and optionally returns an expanded view of all
key/value maps for the environment.</p>
</dd>
<dt>update (update-keyvaluemap-in-an-environment)</dt><dd><p>Note: This API is supported for Apigee Edge for
Private Cloud only. For Apigee Edge for Public Cloud
use Update an entry in an environment-scoped KVM.
Updates an existing KeyValueMap in an environment.
Does not override the existing map. Instead, this
method updates the entries if they exist or adds them
if not. It can take several minutes before the new
value is visible to runtime traffic.</p>
</dd>
<dt>create-entry (create-an-entry-in-an-environment-scoped-kvm)</dt><dd><p>Note: This API is supported for Apigee Edge for the
Public Cloud only. Creates an entry in an existing
KeyValueMap scoped to an environment. A key (name)
cannot be larger than 2 KB. KVM names are case
sensitive.</p>
</dd>
<dt>update-entry (update-an-entry-in-an-environment-scoped-kvm)</dt><dd><p>Note: This API is supported for Apigee Edge for the
Public Cloud only. Updates an entry in a KeyValueMap
scoped to an environment. A key cannot be larger than
2 KB. KVM names are case sensitive. Does not override
the existing map. It can take several minutes before
the new value is visible to runtime traffic.</p>
</dd>
<dt>list-keys (list-keys-in-an-environment-scoped-keyvaluemap)</dt><dd><p>Note: This API is supported for Apigee Edge for the
Public Cloud only. Lists keys in a KeyValueMap scoped
to an environment. KVM names are case sensitive.</p>
</dd>
<dt>push (push-keyvaluemap)</dt><dd><p>Push KeyValueMap to Apigee. This will create
KeyValueMap/entries if they do not exist, update
existing KeyValueMap/entries, and delete entries on
Apigee that are not present in the request body.</p>
</dd>
</dl>
</dd>
</dl>
</dd>
<dt>optional arguments:</dt><dd><dl class="option-list">
<dt><kbd><span class="option">-h</span>, <span class="option">--help</span></kbd></dt>
<dd><p>show this help message and exit</p>
</dd>
</dl>
</dd>
</dl>
<div class="section" id="examples">
<h3>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h3>
<p>To <code class="docutils literal notranslate"><span class="pre">push</span></code> a key value map in a file to Apigee Edge, run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apigee kvms push -e dev -f test_kvm.json
</pre></div>
</div>
<p>This will display a loading bar output like so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Updating entries in test-kvm
100%|██████████████████████████████████████████████| 2/2 [00:00&lt;00:00, 10143.42it/s]
Deleting entries in test-kvm
100%|█████████████████████████████████████████████████| 1/1 [00:00&lt;00:00,  3.70it/s]
</pre></div>
</div>
<p>As you can see, this command will update existing entries and delete those that are not present in the request body.
If the key value map or entry does not exist, a new one will be created.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">push</span></code> subcommand is also available for <code class="docutils literal notranslate"><span class="pre">targetservers</span></code>, <code class="docutils literal notranslate"><span class="pre">caches</span></code>, <code class="docutils literal notranslate"><span class="pre">apiproducts</span></code> and <code class="docutils literal notranslate"><span class="pre">maskconfigs</span></code>.</p>
</div>
</div>
<div class="section" id="getting-permissions-for-a-role">
<span id="id10"></span><h2>Getting permissions for a role<a class="headerlink" href="#getting-permissions-for-a-role" title="Permalink to this headline">¶</a></h2>
<p>To get permissions for a role, run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apigee perms get -n [role] #--showindex --tablefmt fancy_grid
</pre></div>
</div>
<p>This will output a table like so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">organization</span>    <span class="n">path</span>             <span class="n">permissions</span>
<span class="n">myorg</span>           <span class="o">/</span>                <span class="p">[</span><span class="s1">&#39;delete&#39;</span><span class="p">,</span> <span class="s1">&#39;get&#39;</span><span class="p">,</span> <span class="s1">&#39;put&#39;</span><span class="p">]</span>
<span class="n">myorg</span>           <span class="o">/</span><span class="n">environments</span>    <span class="p">[</span><span class="s1">&#39;get&#39;</span><span class="p">]</span>
<span class="n">myorg</span>           <span class="o">/</span><span class="n">environments</span><span class="o">/*</span>  <span class="p">[</span><span class="s1">&#39;get&#39;</span><span class="p">]</span>
<span class="n">myorg</span>           <span class="o">/</span><span class="n">apimonitoring</span>   <span class="p">[</span><span class="s1">&#39;delete&#39;</span><span class="p">,</span> <span class="s1">&#39;get&#39;</span><span class="p">,</span> <span class="s1">&#39;put&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>To output as JSON, specify the <code class="docutils literal notranslate"><span class="pre">-j/--json</span></code> argument.</p>
</div>
<div class="section" id="setting-permissions-for-a-role">
<span id="id11"></span><h2>Setting permissions for a role<a class="headerlink" href="#setting-permissions-for-a-role" title="Permalink to this headline">¶</a></h2>
<p>To set permissions for a role, run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apigee perms create -n [role] -b [request_body]
</pre></div>
</div>
<p>To see how the <code class="docutils literal notranslate"><span class="pre">[request_body]</span></code> is constructed, see:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.apigee.com/api-platform/system-administration/permissions">Permissions reference</a></p></li>
<li><p><a class="reference external" href="https://docs.apigee.com/api-platform/system-administration/managing-roles-api#addpermissionstotestingrole">Add permissions to testing role</a></p></li>
</ul>
<p>There is also the <code class="docutils literal notranslate"><span class="pre">apigee</span> <span class="pre">perms</span> <span class="pre">template</span></code> command, which sets permissions for a team role using a template file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apigee perms template -n [role] -f [template_file] --placeholder-key [placeholder_string] --placeholder-value [placeholder_value]
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">[template_file]</span></code> contains the <code class="docutils literal notranslate"><span class="pre">resourcePermission</span></code> and looks something like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;resourcePermission&quot;</span> <span class="p">:</span> <span class="p">[</span> <span class="p">{</span>
    <span class="s2">&quot;organization&quot;</span> <span class="p">:</span> <span class="s2">&quot;myorg&quot;</span><span class="p">,</span>
    <span class="s2">&quot;path&quot;</span> <span class="p">:</span> <span class="s2">&quot;/&quot;</span><span class="p">,</span>
    <span class="s2">&quot;permissions&quot;</span> <span class="p">:</span> <span class="p">[</span> <span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;put&quot;</span><span class="p">,</span> <span class="s2">&quot;delete&quot;</span> <span class="p">]</span>
  <span class="p">}</span> <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">--placeholder-key</span></code> is specified, then all instances of the placeholder string will be replaced with the <code class="docutils literal notranslate"><span class="pre">--placeholder-value</span></code> (default is an empty string).</p>
</div>
<div class="section" id="importing-modules">
<span id="id12"></span><h2>Importing modules<a class="headerlink" href="#importing-modules" title="Permalink to this headline">¶</a></h2>
<p>To import and make API calls using the modules, do the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">apigee.api.apis</span> <span class="kn">import</span> <span class="n">Apis</span>

<span class="k">class</span> <span class="nc">Struct</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">entries</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">entries</span><span class="p">)</span>

<span class="n">auth</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s1">&#39;[username]&#39;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s1">&#39;[password]&#39;</span><span class="p">,</span> <span class="n">mfa_secret</span><span class="o">=</span><span class="s1">&#39;[mfa_secret]&#39;</span><span class="p">)</span>
<span class="c1"># or use:</span>
<span class="c1"># auth = type(&#39;&#39;, (), dict(username=&#39;[username]&#39;, password=&#39;[password]&#39;, mfa_secret=&#39;[mfa_secret]&#39;))()</span>

<span class="n">apis</span> <span class="o">=</span> <span class="n">Apis</span><span class="p">(</span><span class="n">auth</span><span class="p">,</span> <span class="s1">&#39;[org]&#39;</span><span class="p">,</span> <span class="s1">&#39;[api_name]&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">apis</span><span class="o">.</span><span class="n">list_api_proxy_revisions</span><span class="p">(</span><span class="s1">&#39;[api_name]&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="restoring-developer-apps">
<span id="id13"></span><h2>Restoring Developer Apps<a class="headerlink" href="#restoring-developer-apps" title="Permalink to this headline">¶</a></h2>
<p>To restore a developer app, run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apigee apps restore -f [app_file]
</pre></div>
</div>
<p>This will create the app specified in the <code class="docutils literal notranslate"><span class="pre">[app_file]</span></code> and restore the credentials.</p>
<p>To get a developer app in the first place, run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apigee apps get -d [developer] -n [app_file]
</pre></div>
</div>
</div>
<div class="section" id="getting-help">
<span id="id14"></span><h2>Getting Help<a class="headerlink" href="#getting-help" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://apidocs.apigee.com/management/apis">Apigee Product Documentation</a></p></li>
<li><p><a class="reference external" href="https://docs.apigee.com/api-platform/system-administration/permissions">Permissions reference</a></p></li>
<li><p><a class="reference external" href="https://docs.apigee.com/api-platform/system-administration/managing-roles-api#addpermissionstotestingrole">Add permissions to testing role</a></p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="auth.html" class="btn btn-neutral float-right" title="auth" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="installation.html" class="btn btn-neutral float-left" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Matthew Delotavo

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>