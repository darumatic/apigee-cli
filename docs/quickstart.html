

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Quickstart &mdash; apigee-cli 0.x.x documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="auth" href="auth.html" />
    <link rel="prev" title="Installation" href="installation.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> apigee-cli
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting started</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#getting-started">Getting Started</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#using-saml-authentication">Using SAML authentication</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#using-saml-with-automated-tasks">Using SAML with automated tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="#deploy-api-proxy-bundles">Deploy API Proxy bundles</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cleaning-up-undeployed-revisions">Cleaning up undeployed revisions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#push-commands">Push commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="#managing-plugins-advanced-usage">Managing plugins (Advanced usage)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#configuring">Configuring</a></li>
<li class="toctree-l3"><a class="reference internal" href="#updating">Updating</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pruning">Pruning</a></li>
<li class="toctree-l3"><a class="reference internal" href="#showing">Showing</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="auth.html">auth</a></li>
</ul>
<p class="caption"><span class="caption-text">Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="license.html">Apache License</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html#contact">Contact</a></li>
<li class="toctree-l1"><a class="reference internal" href="disclaimer.html">Disclaimer</a></li>
<li class="toctree-l1"><a class="reference internal" href="help.html">Need Help</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">apigee-cli</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Quickstart</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/quickstart.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="quickstart">
<h1>Quickstart<a class="headerlink" href="#quickstart" title="Permalink to this headline">¶</a></h1>
<div class="section" id="getting-started">
<span id="id1"></span><h2>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<p>Before using apigee-cli, you need to tell it about your Apigee Edge credentials. You
can do this in three ways:</p>
<ul class="simple">
<li><p>Environment variables</p></li>
<li><p>Config file</p></li>
<li><p>Command-line arguments</p></li>
</ul>
<p>The quickest way to get started is to run the <code class="docutils literal notranslate"><span class="pre">apigee</span> <span class="pre">configure</span></code> command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apigee configure
Apigee username (email) []: MY_EMAIL
Apigee password []: MY_PASS
Apigee MFA key (optional) []: MY_KEY
Identity zone name (to support SAML authentication) []:
Use OAuth, no MFA (optional)? [y/N]: n
Default Apigee organization (recommended) []: MY_ORG
Default team/resource prefix (optional) []:
</pre></div>
</div>
<p>You may not need to input anything for some of these prompts. In these cases, simply press <code class="docutils literal notranslate"><span class="pre">enter</span></code> to skip.</p>
<p>You can also do the same thing using command-line arguments:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apigee configure -P default -u MY_EMAIL -p MY_PASS -o MY_ORG -mfa &#39;&#39; -z &#39;&#39; --no-token --prefix &#39;&#39;
</pre></div>
</div>
<p>You may need to specify empty strings as above. Also note the <code class="docutils literal notranslate"><span class="pre">--prefix</span></code> option. This option
will filter the output of some commands, such as the <code class="docutils literal notranslate"><span class="pre">list</span></code> type commands, by the prefix which may be useful to some people,
but if you want to avoid confusion just keep this value empty. You can also explicitly specify the <code class="docutils literal notranslate"><span class="pre">--prefix</span></code>
for those commands if you need it on the fly.</p>
<p>To use environment variables, do the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ export APIGEE_USERNAME=MY_EMAIL
$ export APIGEE_PASSWORD=MY_PASS
$ export APIGEE_MFA_SECRET=MY_KEY
$ export APIGEE_ZONENAME=MY_ZONENAME
$ export APIGEE_IS_TOKEN=BOOL
$ export APIGEE_ORG=MY_ORG
$ export APIGEE_CLI_PREFIX=MY_PREFIX
</pre></div>
</div>
<p>To use the configuration file, create an INI formatted file like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">default</span><span class="p">]</span>
<span class="n">username</span> <span class="o">=</span> <span class="n">MY_EMAIL</span>
<span class="n">org</span> <span class="o">=</span> <span class="n">MY_ORG</span>
<span class="n">mfa_secret</span> <span class="o">=</span> <span class="n">MY_KEY</span>
<span class="n">prefix</span> <span class="o">=</span> <span class="n">MY_PREFIX</span>
<span class="n">password</span> <span class="o">=</span> <span class="n">MY_PASS</span>

<span class="p">[</span><span class="n">produser</span><span class="p">]</span>
<span class="n">org</span> <span class="o">=</span> <span class="n">MY_ORG</span>
<span class="n">username</span> <span class="o">=</span> <span class="n">MY_EMAIL</span>
<span class="n">password</span> <span class="o">=</span> <span class="n">MY_PASS</span>
<span class="n">mfa_secret</span> <span class="o">=</span> <span class="n">MY_KEY</span>
</pre></div>
</div>
<p>and place it in <code class="docutils literal notranslate"><span class="pre">~/.apigee/credentials</span></code>.</p>
<p>As you can see, you can have multiple <code class="docutils literal notranslate"><span class="pre">profiles</span></code> defined in the configuration file. You can then specify which
profile to use by using the <code class="docutils literal notranslate"><span class="pre">-P/--profile</span></code> option. If no profile is specified
the <code class="docutils literal notranslate"><span class="pre">default</span></code> profile is used.</p>
<div class="section" id="using-saml-authentication">
<h3>Using SAML authentication<a class="headerlink" href="#using-saml-authentication" title="Permalink to this headline">¶</a></h3>
<p>If you specified an <code class="docutils literal notranslate"><span class="pre">Identity</span> <span class="pre">zone</span> <span class="pre">name</span> <span class="pre">(to</span> <span class="pre">support</span> <span class="pre">SAML</span> <span class="pre">authentication)</span></code> during setup,
the CLI will automatically use SAML authentication.
If you are not currently signed in by your identity provider, you will be prompted to sign in:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apigee apis list
SSO authorization page has automatically been opened in your default browser.
Follow the instructions in the browser to complete this authorization request.

If your browser did not automatically open, go to the following URL and sign in:

https://{zoneName}.login.apigee.com/passcode

then copy the Temporary Authentication Code.

Please enter the Temporary Authentication Code:
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">zoneName</span></code> will be the <code class="docutils literal notranslate"><span class="pre">Identity</span> <span class="pre">zone</span> <span class="pre">name</span></code> you previously configured.</p>
<p>Refer to the official Apigee documentation to learn more about how to <a class="reference external" href="https://docs.apigee.com/api-platform/system-administration/using-saml">Access the Edge API with SAML</a>.</p>
</div>
</div>
<div class="section" id="using-saml-with-automated-tasks">
<h2>Using SAML with automated tasks<a class="headerlink" href="#using-saml-with-automated-tasks" title="Permalink to this headline">¶</a></h2>
<p>The CLI also supports machine users as described in <a class="reference external" href="https://docs.apigee.com/private-cloud/v4.17.09/using-saml-automated-tasks">Using SAML with automated tasks</a> when SAML is enabled
to support automation for common development tasks, such as test automation or Continuous Integration/Continuous Deployment (CI/CD).</p>
<p>To tell the CLI that the current user <code class="docutils literal notranslate"><span class="pre">--profile</span></code> is a machine user and thus to not redirect you to an identity provider,
you can set the following environment variable like so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ export APIGEE_CLI_IS_MACHINE_USER=true
</pre></div>
</div>
<p>To continue using an ordinary user, you will need to unset this variable or set it to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
<p>Refer to the official Apigee documentation to learn more about identity zones: <a class="reference external" href="https://docs.apigee.com/api-platform/system-administration/saml-overview">SAML Overview</a>.</p>
</div>
<div class="section" id="deploy-api-proxy-bundles">
<h2>Deploy API Proxy bundles<a class="headerlink" href="#deploy-api-proxy-bundles" title="Permalink to this headline">¶</a></h2>
<p>You can also deploy API proxy bundles to Apigee.</p>
<p>This command is an enhanced version of the Apigee API Proxy Deploy Tool.</p>
<p>It supports a bunch of useful features such as MFA, SAML, seamless deployments and automatic handling of <code class="docutils literal notranslate"><span class="pre">missing</span></code> and broken deployments.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ apigee apis deploy -n API_NAME -e ENVIRONMENT -d DIRECTORY_WITH_APIPROXY
</pre></div>
</div>
<p>Some notable options:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Deployment</span> <span class="n">options</span><span class="p">:</span> <span class="p">[</span><span class="n">mutually_exclusive</span><span class="p">]</span>
                                <span class="n">The</span> <span class="n">deployment</span> <span class="n">options</span>
  <span class="o">-</span><span class="n">i</span><span class="p">,</span> <span class="o">--</span><span class="n">import</span><span class="o">-</span><span class="n">only</span> <span class="o">/</span> <span class="o">-</span><span class="n">I</span><span class="p">,</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">import</span><span class="o">-</span><span class="n">only</span>
                                <span class="kn">import</span> <span class="nn">only</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">deploy</span>
  <span class="o">-</span><span class="n">s</span><span class="p">,</span> <span class="o">--</span><span class="n">seamless</span><span class="o">-</span><span class="n">deploy</span> <span class="o">/</span> <span class="o">-</span><span class="n">S</span><span class="p">,</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">seamless</span><span class="o">-</span><span class="n">deploy</span>
                                <span class="n">seamless</span> <span class="n">deploy</span> <span class="n">the</span> <span class="n">bundle</span>
</pre></div>
</div>
</div>
<div class="section" id="cleaning-up-undeployed-revisions">
<h2>Cleaning up undeployed revisions<a class="headerlink" href="#cleaning-up-undeployed-revisions" title="Permalink to this headline">¶</a></h2>
<p>If deploying via CI/CD you may end up with a lot of undeployed revisions. In this case, you can
make use of the <code class="docutils literal notranslate"><span class="pre">clean</span></code> command to delete all undeployed revisions.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ apigee apis clean -n API_NAME
</pre></div>
</div>
<p>You can also specify to keep the last few revisions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apigee apis clean -n API_NAME --save-last INTEGER
</pre></div>
</div>
<p>To only show which revisions will be deleted but not actually delete anything, use the following option:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span><span class="n">dry</span><span class="o">-</span><span class="n">run</span> <span class="o">/</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">dry</span><span class="o">-</span><span class="n">run</span>  <span class="n">show</span> <span class="n">revisions</span> <span class="n">to</span> <span class="n">be</span> <span class="n">deleted</span> <span class="n">but</span> <span class="n">do</span> <span class="ow">not</span> <span class="n">delete</span>
</pre></div>
</div>
</div>
<div class="section" id="push-commands">
<h2>Push commands<a class="headerlink" href="#push-commands" title="Permalink to this headline">¶</a></h2>
<p>Some commands support the <code class="docutils literal notranslate"><span class="pre">push</span></code> subcommand which combines API calls to manage the creation, update and sometimes deletion of resources using a single command.</p>
<p>Push commands read JSON from a file and can be invoked like so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apigee keyvaluemaps push -e ENVIRONMENT -f FILENAME
</pre></div>
</div>
<p>This will create the KVM if it does not exist, and update it if it does.</p>
</div>
<div class="section" id="managing-plugins-advanced-usage">
<h2>Managing plugins (Advanced usage)<a class="headerlink" href="#managing-plugins-advanced-usage" title="Permalink to this headline">¶</a></h2>
<p>The simple plugins manager uses Git to install commands from remote sources, thus you will need to have Git installed for installation to work.
However, it is possible to install plugins manually by storing plugins in the correct location (to be documented).</p>
<p>Currently, only the commands below are supported. More commands will be added to improve automation and user experience.</p>
<p>The steps below show how to install commands from a <a class="reference external" href="https://github.com/mdelotavo/apigee-cli-plugins">public plugins repository</a>.</p>
<div class="section" id="configuring">
<h3>Configuring<a class="headerlink" href="#configuring" title="Permalink to this headline">¶</a></h3>
<p>To configure remote sources for installing plugins, run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">apigee</span> <span class="n">plugins</span> <span class="n">configure</span> <span class="o">-</span><span class="n">a</span>
</pre></div>
</div>
<p>This will open a text editor so that you can specify the remote sources.</p>
<p>If you don’t want changes to be automatically applied, then you can drop the <code class="docutils literal notranslate"><span class="pre">-a</span></code> option.</p>
<p>When the editor opens, copy and paste the following example configuration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">sources</span><span class="p">]</span>
<span class="n">public</span> <span class="o">=</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">mdelotavo</span><span class="o">/</span><span class="n">apigee</span><span class="o">-</span><span class="n">cli</span><span class="o">-</span><span class="n">plugins</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
<p>After saving the changes, the CLI will attempt to install the plugins from the specified Git URI.
Here we use the HTTPS URI but you can also use SSH if you have configured it.</p>
<p>You can also specify multiple sources, as long as the key (<code class="docutils literal notranslate"><span class="pre">public</span></code> in this case) is unique.
The key will be the name of the repository on your local machine under <code class="docutils literal notranslate"><span class="pre">~/.apigee/plugins/</span></code>.</p>
<p>If installation is successful, you should now see additional commands when you run <code class="docutils literal notranslate"><span class="pre">apigee</span> <span class="pre">-h</span></code></p>
</div>
<div class="section" id="updating">
<h3>Updating<a class="headerlink" href="#updating" title="Permalink to this headline">¶</a></h3>
<p>If you specified the <code class="docutils literal notranslate"><span class="pre">-a</span></code> option when running <code class="docutils literal notranslate"><span class="pre">apigee</span> <span class="pre">plugins</span> <span class="pre">configure</span></code> then install will occur automatically.
Otherwise you can run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">apigee</span> <span class="n">plugins</span> <span class="n">update</span>
</pre></div>
</div>
<p>This will install and update plugins.</p>
</div>
<div class="section" id="pruning">
<h3>Pruning<a class="headerlink" href="#pruning" title="Permalink to this headline">¶</a></h3>
<p>If you specified the <code class="docutils literal notranslate"><span class="pre">-a</span></code> option when running <code class="docutils literal notranslate"><span class="pre">apigee</span> <span class="pre">plugins</span> <span class="pre">configure</span></code> then the removal of plugins will occur automatically.
Otherwise you can run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">apigee</span> <span class="n">plugins</span> <span class="n">prune</span>
</pre></div>
</div>
</div>
<div class="section" id="showing">
<h3>Showing<a class="headerlink" href="#showing" title="Permalink to this headline">¶</a></h3>
<p>To show the plugins you have configured, run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">apigee</span> <span class="n">plugins</span> <span class="n">show</span>
</pre></div>
</div>
<p>You can also run the following commands if you specify the plugin name:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">apigee</span> <span class="n">plugins</span> <span class="n">show</span> <span class="o">-</span><span class="n">n</span> <span class="n">PLUGIN_NAME</span> <span class="o">--</span><span class="n">show</span><span class="o">-</span><span class="n">commit</span><span class="o">-</span><span class="n">only</span>
<span class="n">apigee</span> <span class="n">plugins</span> <span class="n">show</span> <span class="o">-</span><span class="n">n</span> <span class="n">PLUGIN_NAME</span> <span class="o">--</span><span class="n">show</span><span class="o">-</span><span class="n">dependencies</span><span class="o">-</span><span class="n">only</span>
</pre></div>
</div>
<p>Some plugins will not load if dependencies are not installed. You can run the following command to install them.
In order for this to work, the plugin needs to have the <code class="docutils literal notranslate"><span class="pre">Requires</span></code> key in the JSON body of the <code class="docutils literal notranslate"><span class="pre">apigee-cli.info</span></code> file.
More details coming soon.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>pip3 install $(apigee plugins show -n PLUGIN_NAME --show-dependencies-only)
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="auth.html" class="btn btn-neutral float-right" title="auth" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="installation.html" class="btn btn-neutral float-left" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Matthew Delotavo

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>